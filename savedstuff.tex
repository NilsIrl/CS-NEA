
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

In order to test the parser we are going to use the built-in unit testing
feature of Rust because they allow to simplify the process of testing with all
the already existing tools provided by rust, and is less error prone than
rolling out our own testing solution, using for example a custom script.

For example, we will be able to view our code coverage, a measure of how much
of the code is being tested by tests. Using this we will be able to add tests
to handle the under tested cases and have a measure of how much of the code is
tested and hence most likely to be correct.

By being able to quantitatively measure our testing strategy we can assure
ourself of the accuracy and reliability of our program.

\section{NOTES NOT PART OF REPORT}

Note on string literals: the unicode characters `‚Äú` and `‚Äù` seem to be used to
delimit string literals. Is that normal??

In the examples given, different unicode characters are used, that's a bit
wacky.

Escaping doesn't seem to exist either

We'll assume identifiers cannot start with numbers (see alter, maybe this can
be changed)

What do we consider whitespace? is a zero width space whitespace?

Do we want to implement closures?? (for language? for implementation? for parsing? for interpreting?)

What are valid identifiers? We'll follow C with: only: letters, digits and
underscore, but first character must be letter or underscore.

Test cases shouldn't be called '*.input' they can contain actual programs so
that doesn't make sense.

%We do not have operator precedence (help)

%Rust doesn't support backtracking in macros:
%https://github.com/rust-lang/rust/issues/24827, https://github.com/rust-lang/rust/issues/42838
so we had to inverse the direction of our ops macro

%Use pretty_assertions to speed up AST testing

Switch statement implemented as a bunch of if else

This language makes no sense. For example, switch statements have a colon after
the expression. WHY?

On (physical) page 39, there is a 1, after `case "B"`, wtf

Switch statement if given complex expression will compute expression at every
check

Log:

%Changed from ../ to CARGO_MANIFEST_DIR

alt((
	value(x, x),
	value(x, x),
	value(x, x),
	value(x, x),
))

was failing to compile. So I had to report it to the authors.

There is no "break" statement for loops.

// TODO: talk about this somewhere in design section
Array is defined as "array" and "Array" in the spec...

Fields in classes must be defined before methods.

For loops will rewrite the counter variable, so the user can change it.
Pascal prevents compilation of programs where the variable is changed so I
think that's a fine behaviour.

For dealing with when to return a float or integer, we are following python's
behaviour. E.g. division always returns float (exception, thinking logically
seems to have issues with the new code) (update: so I asked Mrs Zeshan to show
me the solution to the homework to be 100\% of the correct. Turns out what I
had was correct. So the issue is with the interpreter or PG Online having
terrible questions/mark schemes.

Power return integer or other depending on various things

Problem, test with stdout
Solution: allow to write to other places than stdout

Problem: numerical values can be ints or floats.
Solution: fail no silently whenever types are somewhat not similar and
comparing the 2 hasn't explicitly been defined.

This behaviour is different than what python does. Python will happily compare
an integer and a string, always returning False.

Another way in which the behaviour is away from python is that when we print a
float, if it doesn't have any decimal place it shows like an int. This is
because we use the rust formatter. Although we have said we try to emulate
python behaviour, we will probably use rust behaviour before.

Programmed wasm support in browser it works!!!! I'm a bit wary of performance
issues with stuff being copied.

Fixed performance issue potentially (idk didn't benchmark) but we still have
the problem that the dom won't redraw in this infinite loop...

Tried using xterm js, reached a problem where the input was corrupted. This was
solved by using .slice(): https://github.com/rustwasm/wasm-bindgen/issues/1668

The problem is that even with xterm js the output doesn't show.

Last solution: using a background worker.

Couldn't load web worker. Turns out it's because Firefox doesn't support web
workers as modules.

The solution is to load it dynamically or smth now it works. It's weird how we
have to receive the message first before we can load the module.

Fixed a bug with integer literal parsing where "-1" would be detected a
variable

Could have used something like https://github.com/mitsuhiko/insta to improve
development speed.

Added a reference type which in the end I had to remove, nevermind, I'll just
extend it, why am I so retarded üòñ

We need to implement returning from functions inside of execute\_statements

Add converting functions

Tests wouldn't run because interpret\_with\_write had been removed (fixed in
eb1de2f0f95e77992fabe31b2b5274ad0c4549d0)

There's a test that never finishes and I couldn't detect which, luckily after
60 seconds I was told why (present in eb1de2f0f95e77992fabe31b2b5274ad0c4549d0)

Add this alternative: https://pseudocode.uk/

\subsection{Where to find example code}

\begin{itemize}
	\item In the specification
	\item Unit 10 Computational thinking, Homework 4 Thinking logically
\end{itemize}

